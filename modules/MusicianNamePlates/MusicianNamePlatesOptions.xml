<Ui xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://www.blizzard.com/wow/ui/">
	<Frame name="MusicianOptionsPanelUnitNamePlates" parent="MusicianOptionsPanel">
		<Size>
			<AbsDimension x="580" y="177"/>
		</Size>
		<Anchors>
			<Anchor point="TOPLEFT" relativeTo="MusicianOptionsPanelUnitEmote" relativePoint="BOTTOMLEFT"  x="0" y="-10" />
		</Anchors>
		<Layers>
			<Layer level="ARTWORK">
				<FontString name="$parentTitle" inherits="GameFontNormal" justifyH="LEFT" justifyV="TOP">
					<Anchors>
						<Anchor point="TOPLEFT" />
					</Anchors>
				</FontString>
				<FontString name="$parentSubText" inherits="GameFontHighlightSmall" nonspacewrap="true" maxLines="3" justifyH="LEFT" justifyV="TOP">
					<Size>
						<AbsDimension y="32" x="0"/>
					</Size>
					<Anchors>
						<Anchor point="TOPLEFT" relativeTo="$parentTitle" relativePoint="BOTTOMLEFT" x="0" y="-8" />
						<Anchor point="RIGHT" x="-32" y="0"/>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Frames>

			<Frame name="$parentImage" inherits="MusicianAnimatedImage">
				<Anchors>
					<Anchor point="TOPRIGHT" x="20" y="7" />
				</Anchors>
				<Size>
					<AbsDimension y="170" x="170"/>
				</Size>
				<Scripts>
					<OnLoad inherit="prepend">
						self.fps = 30
						self.width = 2048
						self.height = 2048
						self.tileHeight = 256
						self.tileWidth = 256
						self.textureFile = "Interface\\AddOns\\Musician\\ui\\textures\\nameplates-demo.blp"
					</OnLoad>
				</Scripts>
			</Frame>

			<CheckButton name="$parentEnable" inherits="InterfaceOptionsCheckButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parentSubText" relativePoint="BOTTOMLEFT" x="0" y="4"/>
				</Anchors>
				<Scripts>
					<OnLoad>
						_G[self:GetName().."Text"]:SetText(Musician.Msg.OPTIONS_ENABLE_NAMEPLATES)
						self:SetHitRectInsets(0, -_G[self:GetName().."Text"]:GetWidth(), 0, 0)
						self.type = CONTROLTYPE_CHECKBOX
						BlizzardOptionsPanel_RegisterControl(self, self:GetParent():GetParent())
						BlizzardOptionsPanel_SetupControl(self)
						self:HookScript("OnClick", function()
							local showAll = InterfaceOptionsNamesPanelUnitNameplatesShowAll
							local enemies = InterfaceOptionsNamesPanelUnitNameplatesEnemies
							local friends = InterfaceOptionsNamesPanelUnitNameplatesFriends

							-- Check all 3 boxes when enabling nameplates
							if self:GetChecked() then
								showAll:SetChecked(true)
								showAll:GetScript("OnClick")(showAll)

								enemies:SetChecked(true)
								enemies:GetScript("OnClick")(enemies)

								friends:SetChecked(true)
								friends:GetScript("OnClick")(friends)

								-- Do not stack nameplates
								InterfaceOptionsNamesPanelUnitNameplatesMotionDropDown:SetValue(0)

							-- Only uncheck "show all" when disabling
							else
								showAll:SetChecked(false)
								showAll:GetScript("OnClick")(showAll)
							end
						end)
					</OnLoad>
				</Scripts>
			</CheckButton>
			<CheckButton name="$parentHideNamePlateBars" inherits="InterfaceOptionsSmallCheckButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parentEnable" relativePoint="BOTTOMLEFT" x="10" y="4"/>
				</Anchors>
				<Scripts>
					<OnLoad>
						_G[self:GetName().."Text"]:SetText(Musician.Msg.OPTIONS_HIDE_HEALTH_BARS)
						self:SetHitRectInsets(0, -_G[self:GetName().."Text"]:GetWidth(), 0, 0)
						self.type = CONTROLTYPE_CHECKBOX
						BlizzardOptionsPanel_RegisterControl(self, self:GetParent():GetParent())
						BlizzardOptionsPanel_SetupDependentControl(_G[self:GetParent():GetName().."Enable"], self)
						self:HookScript("OnClick", function()
							Musician.NamePlates.Options.Save(true)
						end)
					</OnLoad>
				</Scripts>
			</CheckButton>
			<CheckButton name="$parentHideNPCs" inherits="InterfaceOptionsSmallCheckButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parentHideNamePlateBars" relativePoint="BOTTOMLEFT" x="0" y="4"/>
				</Anchors>
				<Scripts>
					<OnLoad>
						_G[self:GetName().."Text"]:SetText(Musician.Msg.OPTIONS_HIDE_NPC_NAMEPLATES)
						self:SetHitRectInsets(0, -_G[self:GetName().."Text"]:GetWidth(), 0, 0)
						self.type = CONTROLTYPE_CHECKBOX
						BlizzardOptionsPanel_RegisterControl(self, self:GetParent():GetParent())
						BlizzardOptionsPanel_SetupDependentControl(_G[self:GetParent():GetName().."Enable"], self)
						self:HookScript("OnClick", function()
							Musician.NamePlates.Options.Save(true)
						end)
					</OnLoad>
				</Scripts>
			</CheckButton>
			<CheckButton name="$parentCinematicMode" inherits="InterfaceOptionsCheckButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parentHideNPCs" relativePoint="BOTTOMLEFT" x="-10" y="-6"/>
				</Anchors>
				<Scripts>
					<OnLoad>
						self.type = CONTROLTYPE_CHECKBOX
						BlizzardOptionsPanel_RegisterControl(self, self:GetParent():GetParent())
						BlizzardOptionsPanel_SetupDependentControl(_G[self:GetParent():GetName().."Enable"], self)
						self:HookScript("OnClick", function()
							Musician.NamePlates.Options.Save(true)
						end)
					</OnLoad>
					<OnShow inherits="prepend">
						_G[self:GetName().."Text"]:SetText(string.gsub(Musician.Msg.OPTIONS_CINEMATIC_MODE, '{binding}', GetBindingKey("TOGGLEUI")))
						self:SetHitRectInsets(0, -_G[self:GetName().."Text"]:GetWidth(), 0, 0)
					</OnShow>
				</Scripts>
			</CheckButton>
			<CheckButton name="$parentCinematicModeNamePlates" inherits="InterfaceOptionsSmallCheckButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parentCinematicMode" relativePoint="BOTTOMLEFT" x="10" y="4"/>
				</Anchors>
				<Scripts>
					<OnLoad>
						_G[self:GetName().."Text"]:SetText(Musician.Msg.OPTIONS_NAMEPLATES_CINEMATIC_MODE)
						self:SetHitRectInsets(0, -_G[self:GetName().."Text"]:GetWidth(), 0, 0)
						self.type = CONTROLTYPE_CHECKBOX
						BlizzardOptionsPanel_RegisterControl(self, self:GetParent():GetParent())
						BlizzardOptionsPanel_SetupDependentControl(_G[self:GetParent():GetName().."Enable"], self)
						BlizzardOptionsPanel_SetupDependentControl(_G[self:GetParent():GetName().."CinematicMode"], self)
						self:HookScript("OnClick", function()
							Musician.NamePlates.Options.Save(true)
						end)
					</OnLoad>
				</Scripts>
			</CheckButton>
		</Frames>
		<Scripts>
			<OnLoad>
				MusicianOptionsPanelUnitNamePlatesTitle:SetText(Musician.Msg.OPTIONS_CATEGORY_NAMEPLATES)
				MusicianOptionsPanelUnitNamePlatesSubText:SetText(Musician.Msg.OPTIONS_CATEGORY_NAMEPLATES_SUB_TEXT)
			</OnLoad>
		</Scripts>
	</Frame>
</Ui>